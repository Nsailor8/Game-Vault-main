<div id="authModal" class="modal">
  <div class="modal-content auth-modal-content">
    <div class="auth-container">
      <div class="auth-header">
        <h2 id="authTitle">Welcome to GAMEVAULT</h2>
        <span class="close">&times;</span>
      </div>
      
      
      <div id="loginForm" class="auth-form">
        <div class="form-group">
          <input type="text" id="loginUsername" placeholder="Username" required>
        </div>
        <div class="form-group">
          <div style="position: relative;">
            <input type="password" id="loginPassword" placeholder="Password" required>
            <button type="button" class="password-toggle-btn" onclick="toggleLoginPasswordVisibility()">
              <i class="fas fa-eye" id="loginPasswordToggleIcon"></i>
            </button>
          </div>
        </div>
        <div id="loginError" class="error-message" style="display: none;"></div>
        <div class="form-group">
          <button id="loginBtn" class="btn btn-primary btn-full">Login</button>
        </div>
        <div class="form-group">
          <button id="guestBtnLogin" class="btn btn-secondary btn-full">Continue as Guest</button>
        </div>
        <div class="form-group">
          <p class="auth-switch">Don't have an account? <a href="#" id="showSignup">Sign up</a></p>
        </div>
      </div>
      
      
      <div id="signupForm" class="auth-form" style="display: none;">
        <div class="form-group">
          <input type="text" id="signupUsername" placeholder="Username" required>
        </div>
        <div class="form-group">
          <input type="email" id="signupEmail" placeholder="Email" required>
        </div>
        <div class="form-group">
          <div style="position: relative;">
            <input type="password" id="signupPassword" placeholder="Password" required>
            <button type="button" class="password-toggle-btn" onclick="toggleSignupPasswordVisibility()">
              <i class="fas fa-eye" id="signupPasswordToggleIcon"></i>
            </button>
          </div>
        </div>
        <div id="signupError" class="error-message" style="display: none;"></div>
        <div class="form-group">
          <select id="playStyle" class="form-select">
            <option value="casual">Casual Gamer</option>
            <option value="hardcore">Hardcore Gamer</option>
            <option value="competitive">Competitive Gamer</option>
          </select>
        </div>
        <div class="form-group">
          <input type="text" id="favoriteGenres" placeholder="Favorite Genres (comma separated)">
        </div>
        <div class="form-group">
          <input type="text" id="preferredPlatforms" placeholder="Preferred Platforms (comma separated)">
        </div>
        <div class="form-group">
          <button id="signupBtn" class="btn btn-primary btn-full">Sign Up</button>
        </div>
        <div class="form-group">
          <button id="guestBtnSignup" class="btn btn-secondary btn-full">Continue as Guest</button>
        </div>
        <div class="form-group">
          <p class="auth-switch">Already have an account? <a href="#" id="showLogin">Login</a></p>
        </div>
      </div>
    </div>
  </div>

  <script>

    const authModal = document.getElementById('authModal');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');
    const showSignup = document.getElementById('showSignup');
    const showLogin = document.getElementById('showLogin');
    const closeModal = authModal.querySelector('.close');


    showSignup?.addEventListener('click', (e) => {
      e.preventDefault();
      // Clear login errors
      const loginError = document.getElementById('loginError');
      if (loginError) {
        loginError.style.display = 'none';
        loginError.textContent = '';
      }
      loginForm.style.display = 'none';
      signupForm.style.display = 'block';
    });

    showLogin?.addEventListener('click', (e) => {
      e.preventDefault();
      // Clear signup errors
      const signupError = document.getElementById('signupError');
      if (signupError) {
        signupError.style.display = 'none';
        signupError.textContent = '';
      }
      signupForm.style.display = 'none';
      loginForm.style.display = 'block';
    });


    closeModal?.addEventListener('click', () => {
      authModal.style.display = 'none';
    });


    document.getElementById('guestBtnLogin')?.addEventListener('click', () => {
      authModal.style.display = 'none';

      console.log('Continuing as Guest (Login Form)');
    });

    document.getElementById('guestBtnSignup')?.addEventListener('click', () => {
      authModal.style.display = 'none';
      console.log('Continuing as Guest (Signup Form)');
    });


    window.addEventListener('click', (e) => {
      if(e.target == authModal) authModal.style.display = 'none';
    });

    // Password visibility toggle functions
    function toggleLoginPasswordVisibility() {
      const passwordInput = document.getElementById('loginPassword');
      const toggleIcon = document.getElementById('loginPasswordToggleIcon');
      
      if (passwordInput && toggleIcon) {
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          toggleIcon.classList.remove('fa-eye');
          toggleIcon.classList.add('fa-eye-slash');
        } else {
          passwordInput.type = 'password';
          toggleIcon.classList.remove('fa-eye-slash');
          toggleIcon.classList.add('fa-eye');
        }
      }
    }

    function toggleSignupPasswordVisibility() {
      const passwordInput = document.getElementById('signupPassword');
      const toggleIcon = document.getElementById('signupPasswordToggleIcon');
      
      if (passwordInput && toggleIcon) {
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          toggleIcon.classList.remove('fa-eye');
          toggleIcon.classList.add('fa-eye-slash');
        } else {
          passwordInput.type = 'password';
          toggleIcon.classList.remove('fa-eye-slash');
          toggleIcon.classList.add('fa-eye');
        }
      }
    }

    // Make functions globally available
    window.toggleLoginPasswordVisibility = toggleLoginPasswordVisibility;
    window.toggleSignupPasswordVisibility = toggleSignupPasswordVisibility;
  </script>
</div>
