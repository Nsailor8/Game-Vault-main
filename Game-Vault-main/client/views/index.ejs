<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Vault - Home</title>
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <div class="container">
    <!-- Header Partial -->
    <%- include('partials/header') %>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Trending Games Section -->
      <section class="section">
        <div class="section-header">
          <h2>ðŸ”¥ Trending Games</h2>
          <p>Most popular and highly rated games</p>
        </div>
        <div id="trendingList" class="games-grid">
          <% if (trendingGames && trendingGames.length) { %>
            <% trendingGames.forEach(function(game) { %>
              <div class="game-card-simple" onclick="if(window.app) window.app.viewGameDetails(<%= game.id %>)">
                <div class="game-image-simple" style="cursor: pointer;">
                  <% if (game.background_image || game.backgroundImage) { %>
                    <img src="<%= game.background_image || game.backgroundImage %>" alt="<%= game.name %>" class="game-image" loading="lazy">
                  <% } else { %>
                    <div class="no-image">
                      <i class="fas fa-gamepad"></i>
                    </div>
                  <% } %>
                  <% if (game.rating || game.metacritic) { %>
                    <div class="game-card-rating">
                      <% if (game.rating) { %>
                        <span class="rating-badge"><i class="fas fa-star"></i> <%= game.rating.toFixed(1) %></span>
                      <% } %>
                      <% if (game.metacritic) { %>
                        <span class="metacritic-badge">M: <%= game.metacritic %></span>
                      <% } %>
                    </div>
                  <% } %>
                </div>
                <div class="game-name-simple" style="cursor: pointer;">
                  <h3 class="game-title-simple"><%= game.name %></h3>
                </div>
              </div>
            <% }); %>
          <% } else { %>
            <div class="empty-state">
              <i class="fas fa-fire"></i>
              <h3>No trending games available</h3>
              <p>Check back later for the latest trending games!</p>
            </div>
          <% } %>
        </div>
      </section>

      <!-- Recently Added Section -->
      <section class="section">
        <div class="section-header">
          <h2>ðŸ†• Recently Released</h2>
          <p>Latest games that just hit the market</p>
        </div>
        <div id="recentList" class="games-grid">
          <% if (recentGames && recentGames.length) { %>
            <% recentGames.forEach(function(game) { %>
              <div class="game-card-simple" onclick="if(window.app) window.app.viewGameDetails(<%= game.id %>)">
                <div class="game-image-simple" style="cursor: pointer;">
                  <% if (game.background_image || game.backgroundImage) { %>
                    <img src="<%= game.background_image || game.backgroundImage %>" alt="<%= game.name %>" class="game-image" loading="lazy">
                  <% } else { %>
                    <div class="no-image">
                      <i class="fas fa-gamepad"></i>
                    </div>
                  <% } %>
                  <% if (game.rating || game.metacritic) { %>
                    <div class="game-card-rating">
                      <% if (game.rating) { %>
                        <span class="rating-badge"><i class="fas fa-star"></i> <%= game.rating.toFixed(1) %></span>
                      <% } %>
                      <% if (game.metacritic) { %>
                        <span class="metacritic-badge">M: <%= game.metacritic %></span>
                      <% } %>
                    </div>
                  <% } %>
                </div>
                <div class="game-name-simple" style="cursor: pointer;">
                  <h3 class="game-title-simple"><%= game.name %></h3>
                </div>
              </div>
            <% }); %>
          <% } else { %>
            <div class="empty-state">
              <i class="fas fa-clock"></i>
              <h3>No recent games available</h3>
              <p>Check back later for the latest releases!</p>
            </div>
          <% } %>
        </div>
      </section>
    </main>

    <!-- Footer Partial -->
    <%- include('partials/footer') %>
  </div>

  <!-- Login Modal -->
  <%- include('partials/loginModal') %>

  <!-- App Script -->
  <script src="/app.js"></script>
</body>
</html>
